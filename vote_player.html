{% extends "base.html" %}

{% block title %}Голосование за игрока - Золотой Мяч{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        <h2 class="mb-4">Голосование за лучшего игрока</h2>
        
        <form method="POST" enctype="multipart/form-data">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="first_name" class="form-label">Имя *</label>
                        <input type="text" class="form-control" id="first_name" name="first_name" required 
                               pattern="[A-Za-zА-Яа-я\s]+" title="Только буквы и пробелы">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="last_name" class="form-label">Фамилия *</label>
                        <input type="text" class="form-control" id="last_name" name="last_name" required
                               pattern="[A-Za-zА-Яа-я\s]+" title="Только буквы и пробелы">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="age" class="form-label">Возраст *</label>
                        <input type="number" class="form-control" id="age" name="age" min="0" max="100" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="club" class="form-label">Клуб *</label>
                        <input type="text" class="form-control" id="club" name="club" required
                               pattern="[A-Za-zА-Яа-я\s]+" title="Только буквы и пробелы">
                    </div>
                </div>
            </div>

            <!-- Поле для загрузки фото с превью -->
            <div class="mb-3">
                <label for="image" class="form-label">Фотография игрока</label>
                <input type="file" class="form-control" id="image" name="image" accept="image/*" onchange="previewImage(event)">
            </div>

            <div class="mb-3">
                <img id="imgPreview" src="#" alt="Превью изображения" style="display:none; max-width: 100%; height: auto;">
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="mb-3">
                        <label for="wins" class="form-label">Победы</label>
                        <input type="number" class="form-control" id="wins" name="wins" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="mb-3">
                        <label for="losses" class="form-label">Поражения</label>
                        <input type="number" class="form-control" id="losses" name="losses" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="mb-3">
                        <label for="draws" class="form-label">Ничьи</label>
                        <input type="number" class="form-control" id="draws" name="draws" min="0" max="100" value="0">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="mb-3">
                        <label for="goals" class="form-label">Голы</label>
                        <input type="number" class="form-control" id="goals" name="goals" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="mb-3">
                        <label for="assists" class="form-label">Ассисты</label>
                        <input type="number" class="form-control" id="assists" name="assists" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="mb-3">
                        <label for="clean_sheets" class="form-label">Сухие матчи</label>
                        <input type="number" class="form-control" id="clean_sheets" name="clean_sheets" min="0" max="100" value="0">
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label for="gentleman_coef" class="form-label">Джентльменский коэффициент</label>
                <input type="number" class="form-control" id="gentleman_coef" name="gentleman_coef" 
                       min="1" max="5" step="0.1" value="1.0">
                <div class="form-text">От 1.0 до 5.0</div>
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary">Сохранить футболиста</button>
                <a href="{{ url_for('index') }}" class="btn btn-secondary">На главную</a>
            </div>
        </form>
    </div>
</div>

<script>
function previewImage(event) {
    const input = event.target;
    const preview = document.getElementById('imgPreview');

    if(input.files && input.files[0]) {
        const reader = new FileReader();

        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
        }

        reader.readAsDataURL(input.files[0]);
    } else {
        preview.src = "#";
        preview.style.display = 'none';
    }
}
</script>
{% endblock %}
