<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - Golden Football</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .feature-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            margin-bottom: 20px;
            height: 100%;
        }
        .feature-card:hover {
            transform: translateY(-5px);
        }
        .card-users { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; }
        .card-awards { background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%); color: white; }
        .card-database { background: linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%); color: white; }
        .card-results { background: linear-gradient(135deg, #834d9b 0%, #d04ed6 100%); color: white; }
        .stats-card { background: #f8f9fa; border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">
                üèÜ Golden Football
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
                    </li>
                    {% if 'user_id' in session %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('logout') }}">–í—ã–π—Ç–∏ ({{ session.login }})</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="admin-header py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col">
                    <h1 class="display-5 fw-bold">‚öôÔ∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                    <p class="lead mb-0">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è Golden Football</p>
                </div>
                <div class="col-auto">
                    <span class="badge bg-warning text-dark fs-6">–†–æ–ª—å: {{ session.role }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    <div class="container mt-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} alert-dismissible fade show">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container my-5">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card stats-card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h5 class="card-title">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h5>
                                <h2 class="text-primary">{{ users_count }}</h2>
                            </div>
                            <div class="align-self-center">
                                <span class="fs-1">üìä</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card stats-card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h5 class="card-title">‚öΩ –§—É—Ç–±–æ–ª–∏—Å—Ç—ã</h5>
                                <h2 class="text-success">{{ players_count }}</h2>
                            </div>
                            <div class="align-self-center">
                                <span class="fs-1">üë§</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card stats-card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h5 class="card-title">üèüÔ∏è –ö–ª—É–±—ã</h5>
                                <h2 class="text-info">{{ clubs_count }}</h2>
                            </div>
                            <div class="align-self-center">
                                <span class="fs-1">üè¢</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="row">
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="card feature-card card-users">
                    <div class="card-body text-center p-4">
                        <div class="mb-3" style="font-size: 3rem;">
                            üë•
                        </div>
                        <h5 class="card-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h5>
                        <p class="card-text">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã</p>
                        <a href="{{ url_for('admin_users') }}" class="btn btn-light btn-sm mt-2">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
                    </div>
                </div>
            </div>

            <!-- –ù–∞–≥—Ä–∞–¥—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="card feature-card card-awards">
                    <div class="card-body text-center p-4">
                        <div class="mb-3" style="font-size: 3rem;">
                            üèÜ
                        </div>
                        <h5 class="card-title">–ù–∞–≥—Ä–∞–¥—ã</h5>
                        <p class="card-text">–ü–æ–¥—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π</p>
                        <a href="{{ url_for('admin_awards') }}" class="btn btn-light btn-sm mt-2">–ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã</a>
                    </div>
                </div>
            </div>

            <!-- –ó–æ–ª–æ—Ç–æ–π –º—è—á -->
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="card feature-card card-results">
                    <div class="card-body text-center p-4">
                        <div class="mb-3" style="font-size: 3rem;">
                            ‚öΩ
                        </div>
                        <h5 class="card-title">–ó–æ–ª–æ—Ç–æ–π –º—è—á</h5>
                        <p class="card-text">–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –ó–æ–ª–æ—Ç–æ–≥–æ –º—è—á–∞</p>
                        <a href="{{ url_for('admin_golden_ball') }}" class="btn btn-light btn-sm mt-2">–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π</a>
                    </div>
                </div>
            </div>

            <!-- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -->
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="card feature-card card-database">
                    <div class="card-body text-center p-4">
                        <div class="mb-3" style="font-size: 3rem;">
                            üóÉÔ∏è
                        </div>
                        <h5 class="card-title">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</h5>
                        <p class="card-text">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä—è–º—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</p>
                        <a href="{{ url_for('admin_query') }}" class="btn btn-light btn-sm mt-2">–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ë—ã—Å—Ç—Ä–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">üöÄ –ë—ã—Å—Ç—Ä–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏</h5>
                    </div>
                    <div class="card-body">
                        <form action="{{ url_for('admin_delete_record') }}" method="post" class="row g-3 align-items-end">
                            <div class="col-md-4">
                                <label class="form-label">–¢–∞–±–ª–∏—Ü–∞</label>
                                <select name="table" class="form-select" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É...</option>
                                    <option value="footballers">–§—É—Ç–±–æ–ª–∏—Å—Ç—ã</option>
                                    <option value="clubs">–ö–ª—É–±—ã</option>
                                    <option value="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                                    <option value="awards">–ù–∞–≥—Ä–∞–¥—ã</option>
                                    <option value="personal_stats">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</option>
                                    <option value="players">–ò–≥—Ä–æ–∫–∏</option>
                                    <option value="trophies">–¢—Ä–æ—Ñ–µ–∏</option>
                                    <option value="gentleman_coefficient">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–∂–µ–Ω—Ç–ª—å–º–µ–Ω—Å—Ç–≤–∞</option>
                                    <option value="golden_ball">–ó–æ–ª–æ—Ç–æ–π –º—è—á</option>
                                    <option value="logs">–õ–æ–≥–∏</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">ID –∑–∞–ø–∏—Å–∏</label>
                                <input type="number" name="record_id" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∑–∞–ø–∏—Å–∏" required min="1">
                            </div>
                            <div class="col-md-4">
                                <button type="submit" class="btn btn-danger w-100" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?')">
                                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
                                </button>
                            </div>
                        </form>
                        <div class="mt-2">
                            <small class="text-muted">
                                –í–Ω–∏–º–∞–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–∞—Å–∫–∞–¥–Ω–æ–º—É —É–¥–∞–ª–µ–Ω–∏—é —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ</h5>
                        <span class="badge bg-light text-dark">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∑–∞–ø–∏—Å–µ–π</span>
                    </div>
                    <div class="card-body">
                        {% if recent_logs %}
                        <div class="table-responsive">
                            <table class="table table-sm table-striped">
                                <thead>
                                    <tr>
                                        <th>–í—Ä–µ–º—è</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for log in recent_logs %}
                                    <tr>
                                        <td class="text-nowrap" style="width: 200px;">
                                            <small>{{ log.timestamp }}</small>
                                        </td>
                                        <td>
                                            <small>{{ log.message }}</small>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% else %}
                        <p class="text-muted text-center py-3">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ –ª–æ–≥–∞—Ö</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p>&copy; 2025 Golden Football. –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.</p>
            <small>–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ session.login }} | –†–æ–ª—å: {{ session.role }} | ID: {{ session.user_id }}</small>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ alert —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(function() {
            var alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                var bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            });
        }, 5000);
    </script>
</body>
</html>